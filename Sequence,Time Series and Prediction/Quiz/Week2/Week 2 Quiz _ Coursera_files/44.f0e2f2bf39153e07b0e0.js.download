(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"9u2/":function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.withRedirectToCover=exports.AttemptPage=void 0;var n=t(e("VbXa")),a=t(e("sbe7")),i=t(e("qhBR")),r=e("Bgbc"),u=t(e("+LJP")),s=t(e("uZxl")),o=e("DA/5"),d=t(e("hJJs")),m=t(e("8PFk")),l=e("1p0w"),c=e("awXj"),f=e("mtFd"),p=t(e("Z1YL")),v=e("pGb1"),S=t(e("CtKc")),b=t(e("JkvR")),D=t(e("UCqf")),g=t(e("xe4q")),y=t(e("iFRF")),I=e("ZoCu"),h=t(e("VtNW"));e("3AUy");var Q=(0,i.default)("AttemptPage"),z=function(e){function AttemptPage(){return e.apply(this,arguments)||this}(0,n.default)(AttemptPage,e);var t=AttemptPage.prototype;return t.componentDidMount=function componentDidMount(){var e=this.props,t=e.shouldRedirectToCover,n=e.redirectToCover;t&&n()},t.render=function render(){var e=this.props,t=e.redirectToCover,n=e.addRedirectToCoverToRouteParams,i=e.examSessionId;return a.default.createElement(S.default,null,function(e){var u=e.item;if(!u)return null;return a.default.createElement(D.default,{standardProctorConfigurationId:u.contentSummary&&"exam"===u.contentSummary.typeName&&u.contentSummary.definition.standardProctorConfigurationId||null},function(e){var S=e.shouldShowTimer,D=e.timeLimit,z=e.secondsLeftInLatestAttempt,E=e.refetch,R=e.remainingAttempts;return a.default.createElement(l.TunnelVisionWrapper,{onClose:t,headerLeft:a.default.createElement(o.HeaderLeft,{headerText:u.name,itemTypeText:(0,h.default)("Graded Quiz"),timeCommitment:u.timeCommitment}),headerRight:a.default.createElement(f.QuizData,{courseId:u.courseId,itemId:u.id,examSessionId:i},function(e){var t=e.isSubmitted;return a.default.createElement(d.default,{deadline:u.deadline,remainingTimeInMs:"number"==typeof z?1e3*z:null,showTimer:S&&!t,timerId:(0,y.default)(u.id),examSessionId:i})}),topBanner:a.default.createElement(f.QuizData,{courseId:u.courseId,itemId:u.id,examSessionId:i},function(e){var n=e.isSubmitted,i=e.client,r,o=(u.contentSummary&&"exam"===u.contentSummary.typeName&&u.contentSummary.definition||{}).passingFraction;if(n&&u.itemGrade)return a.default.createElement(s.default,{courseId:u.courseId,itemId:u.id},function(e){var n=e.lockingConfigurationSummary,i=e.bestEvaluation;return a.default.createElement(g.default,{itemGrade:u.itemGrade,computedScore:null==i?void 0:i.score,maxScore:null==i?void 0:i.maxScore,passingFraction:o,isCumulativeGraded:u.isCumulativeGraded,onKeepLearningClick:t,remainingAttempts:R,lockingConfigurationSummary:n,onTryAgainClick:t})});return null})},a.default.createElement(f.QuizData,{courseId:u.courseId,itemId:u.id,onQuizSessionQueryCompleted:function onQuizSessionQueryCompleted(){return E()},examSessionId:i},function(e){var t=e.quizFormData,i=e.sessionId,s=e.nextSubmissionDraftId,o=e.attemptScore,d=e.totalPoints,l=e.isSubmitted,f=e.hasDraft,D=e.isLimitedFeedback;if(!t||!i)return a.default.createElement(b.default,null);if(D)return null;var g=t.map(function(e){return e.prompt.id});return a.default.createElement(v.QuizStepState,{itemId:u.id,courseId:u.courseId},function(e){var v=e.stepState;return a.default.createElement("div",{className:Q()},a.default.createElement("div",{className:Q("header")},a.default.createElement(r.H2Bold,null,u.name),l&&"number"==typeof o?a.default.createElement("div",{className:Q("submission-grade")},a.default.createElement(r.Label,{tag:"span"},(0,h.default)("Latest Submission Grade")),a.default.createElement("div",{className:Q("grade-percent")},"".concat((0,I.getPercentGradeFromDecimal)(o),"%"))):a.default.createElement(r.Caption,{rootClassName:Q("points")},a.default.createElement(r.Label,{tag:"span"},(0,h.default)("Total points #{totalPoints}",{totalPoints:d})))),a.default.createElement("div",{className:Q("prompts")},t.map(function(e,t){return a.default.createElement(c.QuizQuestion,{key:e.prompt.id,quizQuestion:e,index:t,isReadOnly:!!l,isDisabled:!!(null==v?void 0:v.isSaving)||!!(null==v?void 0:v.isSubmitting)})})),a.default.createElement(p.default,{ids:g,sessionId:i,nextSubmissionDraftId:s},function(e){var t=e.hasUnfilledResponses,i=e.saveDraft,r=e.autoSaveDraft,s=e.submitDraft,o=e.submitLatestSubmissionDraft;return a.default.createElement(m.default,{hasUnfilledResponses:t,itemId:u.id,courseId:u.courseId,saveDraft:i,autoSaveDraft:r,isSubmitted:l,submitDraft:function submitDraft(){return s?s().then(function(){n()}):Promise.reject()},submitLatestSubmissionDraft:function submitLatestSubmissionDraft(){return o?o().then(function(){n()}):Promise.reject()},hasTimer:S,hasDraft:f,stepState:v})}))})}))})})},AttemptPage}(a.default.Component);exports.AttemptPage=z;var E=(0,u.default)(function(e,t){var n=t.refetchCoverPageData;return{redirectToCover:function redirectToCover(){n&&n(),e.push({name:"quiz-cover",params:e.params,query:e.location.query}),window.location.reload()},addRedirectToCoverToRouteParams:function addRedirectToCoverToRouteParams(){e.push({name:"quiz-attempt",params:e.params,query:{redirectToCover:!0}})},shouldRedirectToCover:e.location.query.redirectToCover}});exports.withRedirectToCover=E;var R=E(z);exports.default=R},Qr3p:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.quizActionsMutation=void 0;var n=t(e("VkAN")),a=t(e("sbe7")),i=t(e("lTCR")),r=e("oJmH");function _templateObject(){var e=(0,n.default)(['\n  mutation QuizActions($sessionId: String!, $body: String!, $skipQuestionsField: Boolean!) {\n    action(sessionId: $sessionId, body: $body)\n      @rest(\n        type: "QuizActionData"\n        path: "onDemandExamSessions.v1/{args.sessionId}/actions"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      elements @type(name: "RestQuizQuestionDataElement") {\n        id\n        result @type(name: "RestQuizQuestionDataElementResult") {\n          nextSubmissionDraftId\n          evaluation\n          questions @skip(if: $skipQuestionsField)\n        }\n      }\n    }\n  }\n']);return _templateObject=function _templateObject(){return e},e}var u=(0,i.default)(_templateObject());exports.quizActionsMutation=u;var s=function getSaveDraftMutation(e){return function(t,n,a){return e({variables:{body:{argument:{id:t,input:{responses:a}},name:"saveSubmissionDraft"},sessionId:n,skipQuestionsField:!0}})}},o=function getSubmitDraftMutation(e){return function(t,n){return e({variables:{body:{argument:{responses:n},name:"submitResponses"},sessionId:t,skipQuestionsField:!1}})}},d=function getAutoSubmitDraftMutation(e){return function(t){return e({variables:{body:{argument:{},name:"submitLatestSubmissionDraft"},sessionId:t,skipQuestionsField:!1}})}},m,l=function QuizMutations(e){var t=e.children;return a.default.createElement(r.Mutation,{mutation:u},function(e){var n=s(e),a=o(e),i=d(e);return t({saveDraftMutation:n,submitDraftMutation:a,autoSubmitDraftMutation:i})})};exports.default=l},Z1YL:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=t(e("sbe7")),a=t(e("cXyc")),i=e("pGb1"),r=t(e("r1db")),u=t(e("CtKc")),s=t(e("uZxl")),o=t(e("Qr3p")),d,m=function QuizActions(e){var t=e.ids,d=e.sessionId,m=e.children,l=e.nextSubmissionDraftId;return n.default.createElement(u.default,null,function(e){var u=e.item;if(!u)return null;var c=u.courseId,f=u.id;return n.default.createElement(s.default,{courseId:c,itemId:f},function(e){var s=e.refetch;return n.default.createElement(a.default,{ids:t},function(e){if(!e||!s)return m({});var t=e.some(function(e){var t,n;return!(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.value)});return n.default.createElement(i.QuizStepState,{itemId:f,courseId:c},function(a){var i=a.stepState,c=a.setStepState;return n.default.createElement(o.default,null,function(a){var o=a.saveDraftMutation,f=a.submitDraftMutation,p=a.autoSubmitDraftMutation,v=e.map(function(e){var t,n;return{questionInstance:e.id,response:null===(t=e.response)||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.value}}),S=function saveDraft(){if(!i.isSaving&&!i.isSubmitting&&l)return c({isSaving:!0}),o(l,d,v).then(function(){return c({isSaving:!1})});return Promise.reject()},b=function autoSaveDraft(){if(!i.isAutoSaving&&!i.isSubmitting&&l)return c({isAutoSaving:!0}),o(l,d,v).then(function(){return c({isAutoSaving:!1})});return Promise.reject()},D=function refetchItemAndExamSummary(){return s().then(function(){return u.refetch()})},g=function submitDraft(){if(!i.isSubmitting)return c({isSubmitting:!0}),f(d,v).then(function(){return c({isSubmitting:!1})}).then(D);return Promise.reject()},y=function submitLatestSubmissionDraft(){if(!i.isSubmitting)return c({isSubmitting:!0}),p(d).then(function(){return c({isSubmitting:!1})}).then(D);return Promise.reject()};return n.default.createElement(r.default,{stepState:i,saveDraft:b,changedResponses:e},function(){return m({hasUnfilledResponses:t,saveDraft:S,autoSaveDraft:b,submitDraft:g,submitLatestSubmissionDraft:y})})})})})})})};exports.default=m},mtFd:function(module,exports,e){"use strict";(function(t){var n=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.QuizData=exports.quizDataQuery=exports.quizSessionMetaDataQuery=void 0;var a=n(e("VkAN")),i=n(e("lTCR")),r=e("oJmH"),u=n(e("McCs"));function _templateObject2(){var e=(0,a.default)(['\n  query QuizDataQuery(\n    $sessionId: String!\n    $questionDataArgs: String!\n    $responseDataArgs: String!\n    $skipFetchingResponses: Boolean!\n  ) {\n    quizQuestionData(sessionId: $sessionId, questionDataArgs: $questionDataArgs)\n      @rest(\n        type: "QuizQuestionData"\n        path: "onDemandExamSessions.v1/{args.sessionId}/actions"\n        method: "POST"\n        bodyKey: "questionDataArgs"\n      ) {\n      elements @type(name: "RestQuizQuestionDataElement") {\n        id\n        result @type(name: "RestQuizQuestionDataElementResult") {\n          questions\n          nextSubmissionDraftId\n          evaluation\n          responses(sessionId: $sessionId, responseDataArgs: $responseDataArgs)\n            @skip(if: $skipFetchingResponses)\n            @rest(\n              type: "QuizResponseData"\n              path: "onDemandExamSessions.v1/{args.sessionId}/actions"\n              method: "POST"\n              bodyKey: "responseDataArgs"\n            ) {\n            elements @type(name: "RestQuizResponseDataElement") {\n              id\n              result\n            }\n          }\n        }\n      }\n    }\n  }\n']);return _templateObject2=function _templateObject2(){return e},e}function _templateObject(){var e=(0,a.default)(['\n  query QuizSessionMetaDataQuery($body: String!) {\n    quizSessionMetaData(body: $body)\n      @rest(type: "RestQuizSessionMetadata", path: "onDemandExamSessions.v1", method: "POST", bodyKey: "body") {\n      elements @type(name: "RestQuizSessionMetadataElement") {\n        id\n      }\n    }\n  }\n']);return _templateObject=function _templateObject(){return e},e}var s=(0,i.default)(_templateObject());exports.quizSessionMetaDataQuery=s;var o=(0,i.default)(_templateObject2());exports.quizDataQuery=o;var d=function QuizData(e){var n=e.courseId,a=e.itemId,i=e.examSessionId,d=e.children,m=e.onQuizSessionQueryCompleted,l={courseId:n,itemId:a},c={argument:[],name:"getState"},f={argument:[],name:"getLatestSubmissionDraft"};return t.createElement(r.Query,{query:s,variables:{body:l},onCompleted:m,skip:!!i},function(e){var n=e.loading,a=e.data,s=e.refetch;if(n&&!i)return d({loading:n});var m=i||a.quizSessionMetaData.elements[0].id;return t.createElement(r.Query,{query:o,variables:{sessionId:m,questionDataArgs:c,responseDataArgs:f,skipFetchingResponses:!!i}},function(e){var t=e.loading,n=e.data,a=e.refetch,r=e.client;if(t)return d({loading:t});var o=n.quizQuestionData.elements[0].result,l=o.questions,c=o.responses,f=o.nextSubmissionDraftId,p=o.evaluation,v=null==c?void 0:c.elements[0].result.draft.input.responses,S=(0,u.default)(l,v,!!i),b=p&&p.score/p.maxScore,D=(null==p?void 0:p.maxScore)||S.reduce(function(e,t){return e+t.prompt.weightedScoring.maxScore},0),g=!l[0].isSubmitAllowed,y="NoDetails"===l[0].variant.detailLevel,I,h;return d({loading:t,quizFormData:S,sessionId:m,nextSubmissionDraftId:f,isSubmitted:g,isLimitedFeedback:y,attemptScore:b,totalPoints:D,hasDraft:!!v,refetchQuizData:function refetchQuizData(){return s().then(function(){return a()})},client:r})})})};exports.QuizData=d;var m=d;exports.default=m}).call(this,e("sbe7"))}}]);
//# sourceMappingURL=44.f0e2f2bf39153e07b0e0.js.map